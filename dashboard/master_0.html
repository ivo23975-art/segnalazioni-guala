<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MASTER â€“ Pannello di Controllo</title>

<!-- CSS -->
<link rel="stylesheet" href="master.css?v=10000">

<!-- FIREBASE (v8 compat) -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

<!-- CONFIG FIREBASE -->
<script src="firebase-config.js"></script>

<!-- MASTER LOGIC -->
<script src="master-auth.js?v=10000" defer></script>
<script src="master.js?v=10000" defer></script>

</head>

<body onload="checkMasterLogin()">

<!-- HEADER -->
<header class="header">
    <h1 class="header-title">MASTER â€“ Gestione Utenti & Struttura</h1>
</header>

<!-- PANEL -->
<div class="panel glass">

    <!-- ===========================
         ðŸ“² LINK APP & DASHBOARD
    ============================ -->
    <section>
        <h2>Link App & Dashboard</h2>

        <ul class="link-list">
            <li><a href="guala.html" class="btn-link">ðŸ”µ Pannello Guala</a></li>
            <li><a href="piobesi.html" class="btn-link">ðŸŸ¢ Pannello Piobesi</a></li>
            <li><a href="particomuni.html" class="btn-link">ðŸŸ¡ Parti Comuni</a></li>
            <li><a href="superadmin.html" class="btn-link">ðŸ”´ SuperAdmin</a></li>
        </ul>
    </section>

    <!-- ===========================
         ðŸ“¥ INSTALLA APP
    ============================ -->
    <section>
        <h2>ðŸ“² Installazione App</h2>

        <div class="install-box">

            <a class="btn-primary" href="https://ivo23975-art.github.io/segnalazioni-guala/installa-guala.html" target="_blank">
                ðŸ”µ Installa App Guala
            </a>

            <a class="btn-primary" href="https://ivo23975-art.github.io/segnalazioni-guala/installa-piobesi.html" target="_blank">
                ðŸŸ¢ Installa App Piobesi
            </a>

            <a class="btn-primary" href="https://ivo23975-art.github.io/segnalazioni-guala/installa-completo.html" target="_blank">
                ðŸŸ£ Installa App Completa
            </a>

        </div>
    </section>

    <!-- ===========================
         âž• CREA UTENTE APP
    ============================ -->
    <section>
        <h2>Crea nuovo utente App</h2>

        <label>Username</label>
        <input type="text" id="newUser">

        <label>PIN (6 cifre)</label>
        <input type="text" id="newPin" maxlength="6">

        <button class="btn-primary" onclick="createUser()">Crea Utente</button>
        <button class="btn-secondary" onclick="generatePin()">Genera PIN Automatico</button>
    </section>

    <!-- ===========================
         ðŸ‘¥ UTENTI REGISTRATI
    ============================ -->
    <section>
        <h2>Utenti App Registrati</h2>
        <table class="table" id="usersTable">
            <thead>
                <tr>
                    <th>Username</th>
                    <th>PIN</th>
                    <th>Stato</th>
                    <th>Azioni</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </section>

    <!-- ===========================
         ðŸ“‘ LOG ATTIVITÃ€
    ============================ -->
    <section>
        <h2>Registro attivitÃ  MASTER</h2>

        <button class="btn-secondary" onclick="exportLog()">Scarica LOG</button>

        <table class="table" id="logTable">
            <thead>
                <tr>
                    <th>Data</th>
                    <th>Azione</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </section>

    <!-- ===========================
         â„¹ï¸ INFO
    ============================ -->
    <section>
        <h2>LEGGIMI</h2>
        <p>
            Questo pannello controlla utenti, accessi e struttura dell'app.  
            Tutte le operazioni vengono registrate automaticamente nel LOG.
        </p>
    </section>

</div>

<!-- LOGOUT -->
<button class="logout-bottom" onclick="logoutMaster()">Logout</button>

</body>
</html>
