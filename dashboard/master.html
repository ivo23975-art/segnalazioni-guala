<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MASTER â€“ Pannello di Controllo</title>

<!-- CSS -->
<link rel="stylesheet" href="master.css?v=10000">

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

<!-- CONFIG FIREBASE â€“ PERCORSO ASSOLUTO CORRETTO -->
<script src="https://ivo23975-art.github.io/segnalazioni-guala/firebase-config.js?v=1"></script>

<!-- MASTER LOGIC -->
<script src="master-auth.js?v=10000" defer></script>
<script src="master.js?v=10000" defer></script>

</head>

<body onload="checkMasterLogin()">

<header class="header">
    <h1 class="header-title">MASTER â€“ Gestione Utenti & Struttura</h1>
</header>

<div class="panel glass">

    <section>
        <h2>Link App & Dashboard</h2>
        <ul class="link-list">
            <li><a href="guala.html" class="btn-link">ğŸ”µ Pannello Guala</a></li>
            <li><a href="piobesi.html" class="btn-link">ğŸŸ¢ Pannello Piobesi</a></li>
            <li><a href="particomuni.html" class="btn-link">ğŸŸ¡ Parti Comuni</a></li>
            <li><a href="superadmin.html" class="btn-link">ğŸ”´ SuperAdmin</a></li>
        </ul>
    </section>

    <section>
        <h2>ğŸ“² Installazione App</h2>

        <div class="install-box">

            <a class="btn-primary" href="https://ivo23975-art.github.io/segnalazioni-guala/installa-guala.html" target="_blank">
                ğŸ”µ Installa App Guala
            </a>

            <a class="btn-primary" href="https://ivo23975-art.github.io/segnalazioni-guala/installa-piobesi.html" target="_blank">
                ğŸŸ¢ Installa App Piobesi
            </a>

            <a class="btn-primary" href="https://ivo23975-art.github.io/segnalazioni-guala/installa-completo.html" target="_blank">
                ğŸŸ£ Installa App Completa
            </a>

        </div>
    </section>

    <section>
        <h2>ğŸ–¨ï¸ Stampa & Esporta Segnalazioni</h2>

        <label>Seleziona complesso</label>
        <select id="exportComplesso">
            <option value="guala">ğŸ”µ Guala</option>
            <option value="piobesi">ğŸŸ¢ Piobesi</option>
            <option value="particomuni">ğŸŸ¡ Parti Comuni</option>
            <option value="tutti">ğŸŸ£ Tutti i complessi</option>
        </select>

        <label style="margin-top:10px;">Seleziona tipo di dati</label>
        <select id="exportTipo">
            <option value="attive">Solo segnalazioni attive</option>
            <option value="risolte">Solo segnalazioni risolte</option>
            <option value="tutte">Tutte (attive + risolte)</option>
        </select>

        <div style="margin-top:15px;">
            <button class="btn-primary" onclick="stampaSegnalazioni()">ğŸ–¨ï¸ Stampa</button>
            <button class="btn-secondary" onclick="exportPDF()">ğŸ“„ Esporta PDF</button>
            <button class="btn-secondary" onclick="exportExcel()">ğŸ“Š Esporta Excel</button>
            <button class="btn-secondary" onclick="exportCSV()">ğŸ“ Esporta CSV</button>
        </div>
    </section>

    <section>
        <h2>Crea nuovo utente App</h2>
        <label>Username</label>
        <input type="text" id="newUser">

        <label>PIN (6 cifre)</label>
        <input type="text" id="newPin" maxlength="6">

        <button class="btn-primary" onclick="createUser()">Crea Utente</button>
        <button class="btn-secondary" onclick="generatePin()">Genera PIN Automatico</button>
    </section>

    <section>
        <h2>Utenti App Registrati</h2>
        <table class="table" id="usersTable">
            <thead>
                <tr>
                    <th>Username</th>
                    <th>PIN</th>
                    <th>Stato</th>
                    <th>Azioni</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </section>

    <section>
        <h2>Registro attivitÃ  MASTER</h2>

        <button class="btn-secondary" onclick="exportLog()">Scarica LOG</button>

        <table class="table" id="logTable">
            <thead>
                <tr>
                    <th>Data</th>
                    <th>Azione</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </section>

    <section>
        <h2>LEGGIMI</h2>
        <p>
            Questo pannello controlla utenti, accessi e struttura dell'app.<br>
            Tutte le operazioni vengono registrate automaticamente nel LOG.
        </p>
    </section>

</div>

<button class="logout-bottom" onclick="logoutMaster()">Logout</button>

<script src="../export_new.js?v=1"></script>

</body>
</html>
